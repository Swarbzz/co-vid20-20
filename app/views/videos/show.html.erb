<p id="notice"><%= notice %></p>
<link href="https://vjs.zencdn.net/7.7.5/video-js.css" rel="stylesheet" />

  <!-- If you'd like to support IE8 (for Video.js versions prior to v7) -->
  <script src="https://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>
<p>
  Title: <%= @video.title %>
</p>

<p>
  Description: <%= @video.description %>
</p>

<p>
  Tags: <%= raw @video.all_tags %>
</p>

<video
    id="my-video"
    class="video-js"
    controls
    preload="auto"
    width="640"
    height="264"
    poster="<%= url_for(@video.thumbnail)%>"
    data-setup="{}"
  >
    <source src="<%= url_for(@video.clip) %>" type="video/mp4" />
    
  </video>
  <p><%= @video.likes.count %> <%= (@video.likes.count) == 1 ? 'Like' : 'Likes'%></p>
  <% pre_like = @video.likes.find { |like| like.user_id == current_user.id} %>
<% if pre_like %>
  <%= button_to 'Unlike', video_like_path(@video, pre_like), method: :delete %>
<% else %>
  <%= button_to 'Like', video_likes_path(@video), method: :video %>
  <% end %>
  <div id="chatbox" style="width: 30%;height: 100px;border:solid black;margin-top: 20px;overflow:scroll">
    <% @comments.each do |comment| %>
    <div class="message"><%= comment.make_comment(comment) %> </div>
    <% end %>
  </div>
  <%= form_for @comment, remote: true do |f| %>
    <%= f.hidden_field :video_id, :value => params[:id] %>
    <%= f.text_field :content %>
    <%= f.submit %>
  <% end %>
<script src="https://vjs.zencdn.net/7.7.5/video.js"></script>

<%= link_to 'Edit', edit_video_path(@video) %> |
<%= link_to 'Back', videos_path %>
